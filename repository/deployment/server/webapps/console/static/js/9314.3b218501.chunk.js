(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[9314],{4346:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>se});var r=t(42125),o=t(89101),a=t(14603),l=t(90268),i=t(81816),s=t(52983),u=t(9202),c=t(54221),d=t(73949),m=t(92305),p=t(33834),f=t(65211),v=t(54004),g=t(50593),y=t(20996),b=t(96433),E=t(83374),O=t(10250),h=t(46439),R=t(46440),I=t(67127),S=t(90656),A=t(80785),N=t(90820),C=t(17999),Z=t(61549);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},L.apply(this,arguments)}function j(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,l,i=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var U=function(e){var n,t,r=e.isReadOnly,o=e.role,d=e.onRoleUpdate,m=e.tabIndex,p=e.isSubOrganization,f=e["data-componentid"],y=(0,c.I0)(),b=(0,u.$)().t,E=(0,A.Z)(!p,"type eq tenant","apiResources").data,_=(0,A.Z)(!p,"type eq organization","apiResources").data,U=(0,c.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.legacyMode})),w=j((0,s.useState)(void 0),2),M=w[0],x=w[1],P=(0,s.useMemo)((function(){var e;if(!E)return null;var n=(0,R.Z)(E),t=[];return null!=U&&U.rolesV1?t.push(N.S.ROLE_API_RESOURCES_COLLECTION_NAME):t.push(N.S.ROLE_V1_API_RESOURCES_COLLECTION_NAME),n.apiResourceCollections=null==n||null===(e=n.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!t.includes(null==e?void 0:e.name)})),n}),[E]),z=(0,s.useMemo)((function(){var e;if(!_)return null;var n=(0,R.Z)(_),t=[];return null!=U&&U.rolesV1?t.push(N.S.ORG_ROLE_API_RESOURCES_COLLECTION_NAME):t.push(N.S.ORG_ROLE_V1_API_RESOURCES_COLLECTION_NAME),n.apiResourceCollections=null==n||null===(e=n.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!t.includes(null==e?void 0:e.name)})),n}),[_]),T=function(e,n){var t=e.apiResources.read.flatMap((function(e){return e.scopes.map((function(e){return e.name}))})),r=e.apiResources.write.flatMap((function(e){return e.scopes.map((function(e){return e.name}))})),o=t.every((function(e){return n.includes(e)})),a=r.every((function(e){return n.includes(e)}));return o||a?{permissions:(0,C.Z)(e.apiResources[a?"write":"read"]),read:!a&&o,write:a}:null},G=(0,s.useMemo)((function(){var e,n,t,r=null==o||null===(e=o.permissions)||void 0===e?void 0:e.map((function(e){return e.value})),a={organization:{},tenant:{}};return null==P||null===(n=P.apiResourceCollections)||void 0===n||n.forEach((function(e){var n=T(e,r);n&&(a.tenant[e.id]=n)})),null==z||null===(t=z.apiResourceCollections)||void 0===t||t.forEach((function(e){var n=T(e,r);n&&(a.organization[e.id]=n)})),a}),[o,P,z]);return s.createElement(i.pJ,{padded:"very",className:"console-role-permissions"},s.createElement("div",{className:"section-heading"},s.createElement(i.X6,{as:"h4"},b("console:manage.features.roles.edit.permissions.heading")),s.createElement(i.X6,{as:"h6",color:"grey",subHeading:!0},b(r?"console:manage.features.roles.edit.permissions.readOnlySubHeading":"console:manage.features.roles.edit.permissions.subHeading"))),p?s.createElement(O.Z,{readOnly:!0,multiple:!0,options:null!==(n=null==o?void 0:o.permissions)&&void 0!==n?n:[],defaultValue:null!==(t=null==o?void 0:o.permissions)&&void 0!==t?t:[],getOptionLabel:function(e){return e.display},renderInput:function(e){return s.createElement(h.Z,L({},e,{"data-componentid":"".concat(f,"-textfield")}))},renderTags:function(e,n){return e.map((function(e,t){return s.createElement(S.w,L({},n({index:t}),{key:t,primaryText:e.display,secondaryText:e.value,option:e,activeOption:null,setActiveOption:function(){return null},variant:"solid"}))}))}}):s.createElement(Z.Z,{defaultExpandedIfPermissionsAreSelected:!0,isReadOnly:r,initialValues:G,onPermissionsChange:x}),!r&&s.createElement(i.KM,{className:"submit-button",variant:"contained",size:"small",loading:!1,disabled:(0,I.Z)(null==o?void 0:o.permissions)||M&&(0,I.Z)(M),onClick:function(){!function(e){var n=null!=e?e:null==o?void 0:o.permissions,t={Operations:[{op:"replace",value:{permissions:null==n?void 0:n.map((function(e){return{value:e.value}}))}}],schemas:[g.lg.PATCH_OP]};(0,v.dB)(o.id,t).then((function(){d(m),y((0,l.V_)({description:b("console:manage.features.roles.notifications.updateRole.success.description"),level:a.QU.SUCCESS,message:b("console:manage.features.roles.notifications.updateRole.success.message")}))})).catch((function(){y((0,l.V_)({description:b("console:manage.features.roles.notifications.updateRole.genericError.description"),level:a.QU.ERROR,message:b("console:manage.features.roles.notifications.updateRole.genericError.message")}))}))}(M)},"data-componentid":"".concat(f,"-update-button")},b("common:update")))};U.defaultProps={"data-componentid":"console-roles-table"};const w=U;var M=t(96627),x=t(14157),P=t(43810),z=t(47447),T=t(51883),G=t(62132),J=t.n(G),V=t(27899),$=t.n(V),W=t(76569),X=t.n(W),B=t(34753),k=t.n(B),Q=t(93598),H=t.n(Q),q=t(46244),D=t.n(q),F=t(83259),Y=t.n(F),K={};K.styleTagTransform=D(),K.setAttributes=k(),K.insert=X().bind(null,"head"),K.domAPI=$(),K.insertStyleElement=H();J()(Y(),K);Y()&&Y().locals&&Y().locals;function ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,l,i=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return ne(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ne(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var te=function(e){var n=e.isLoading,t=e.roleObject,r=e.onRoleUpdate,o=e.defaultActiveIndex,a=(0,u.$)().t,l=(0,M.z)().organizationType,d=(0,c.v9)((function(e){var n,t,r;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t||null===(r=t.features)||void 0===r?void 0:r.userRoles})),m=(0,c.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),p=(0,c.v9)((function(e){var n,t;return null==e||null===(n=e.config)||void 0===n||null===(t=n.ui)||void 0===t?void 0:t.administratorRoleDisplayName})),f=ee((0,s.useState)(!1),2),v=f[0],O=f[1],h=l===y.$B.SUBORGANIZATION;(0,s.useEffect)((function(){t&&O(t.displayName===b.nL.ADMIN_ROLE||(null==t?void 0:t.displayName)===b.nL.ADMIN_GROUP||(null==t?void 0:t.displayName)===p)}),[t]);var R;return s.createElement(i.M$,{isLoading:n,defaultActiveIndex:o,panes:[{menuItem:a("console:manage.features.roles.edit.menuItems.basic"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(x.Q,{isReadOnly:h||v||!(0,E.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,m),role:t,onRoleUpdate:r,tabIndex:0,enableDeleteErrorConnetedAppsModal:!1}))}},{menuItem:a("console:manage.features.roles.edit.menuItems.permissions"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(w,{isReadOnly:h||v||!(0,E.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,m),role:t,onRoleUpdate:r,tabIndex:1,isSubOrganization:h}))}},{menuItem:a("console:manage.features.roles.edit.menuItems.groups"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(z.q,{isReadOnly:!(0,E.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,m),role:t,onRoleUpdate:r,tabIndex:2}))}},{menuItem:a("console:manage.features.roles.edit.menuItems.users"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(T.G,{isReadOnly:!(0,E.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,m),role:t,onRoleUpdate:r,tabIndex:3}))}},(null==t||null===(R=t.audience)||void 0===R?void 0:R.type)===g.cv.ORGANIZATION.toLocaleLowerCase()?{menuItem:a("console:manage.features.roles.edit.menuItems.connectedApps"),render:function(){var e;return s.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},s.createElement(P.u,{isReadOnly:!(0,E.hasRequiredScopes)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,m),role:t,onRoleUpdate:r,tabIndex:4}))}}:null]})};te.defaultProps={defaultActiveIndex:0};const re=te;var oe=t(62574);function ae(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,l,i=[],s=!0,u=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(i.push(r.value),i.length!==n);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return le(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return le(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var ie=function(e){var n,t,y,b=e["data-componentid"],E=(0,u.$)().t,O=(0,c.I0)(),h=ae((0,s.useState)(void 0),2),R=h[0],I=h[1],S=ae((0,s.useState)(0),2),A=S[0],N=S[1];(0,s.useEffect)((function(){var e=f.m.location.pathname.split("/"),n=e[e.length-1];I(n)}),[]);var C=(0,v.tE)(R),Z=C.data,L=C.isLoading,j=C.error,_=C.mutate;(0,s.useEffect)((function(){j&&O((0,l.V_)({description:E("console:manage.features.roles.notifications.fetchRole.genericError.description"),level:a.QU.ERROR,message:E("console:manage.features.roles.notifications.fetchRole.genericError.message")}))}),[j]);var U=function(){f.m.push(p.$.getPaths().get("CONSOLE_SETTINGS")+"#tab=".concat(oe.w.ROLES))};return j?function(){if(j)return s.createElement(i.$J,{subtitle:[E("console:manage.features.roles.edit.placeholders.errorPlaceHolder.subtitles.0"),E("console:manage.features.roles.edit.placeholders.errorPlaceHolder.subtitles.1")],title:E("console:manage.features.roles.edit.placeholders.errorPlaceHolder.title"),image:(0,m.jF)().emptySearch,action:s.createElement(r.Z,{onClick:U},E("console:manage.features.roles.edit.placeholders.errorPlaceHolder.action")),imageSize:"tiny"})}():s.createElement(i.O9,{"data-componentid":b,isLoading:L,title:Z&&null!=Z&&Z.displayName?null==Z?void 0:Z.displayName:E("console:manage.pages.rolesEdit.title"),description:s.createElement(o.Z,{container:!0,alignItems:"center"},s.createElement(o.Z,null,g.cv.ORGANIZATION===(null==Z||null===(n=Z.audience)||void 0===n?void 0:n.type.toUpperCase())?E("console:manage.features.roles.list.columns.managedByOrg.label"):E("console:manage.features.roles.list.columns.managedByApp.label")),s.createElement(o.Z,null,s.createElement(d.Z,{className:g.cv.ORGANIZATION===(null==Z||null===(t=Z.audience)||void 0===t?void 0:t.type.toUpperCase())?"issuer-label":"client-id-label"},null==Z||null===(y=Z.audience)||void 0===y?void 0:y.display))),pageTitle:E("console:manage.pages.rolesEdit.title"),backButton:{onClick:U,text:E("console:manage.pages.rolesEdit.backButton",{type:"roles"})},titleTextAlign:"left",bottomMargin:!1},s.createElement(re,{isLoading:L,roleObject:Z,onRoleUpdate:function(e){_(),N(e)},defaultActiveIndex:A}))};ie.defaultProps={"data-componentid":"console-roles-edit-page"};const se=ie},83259:e=>{e.exports=[[e.id,".console-role-permissions .section-heading{margin-bottom:2rem}.console-role-permissions .submit-button{margin-top:2rem}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnNvbGUtcm9sZXMtZWRpdC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJDQUEyQyxrQkFBa0IsQ0FBQyx5Q0FBeUMsZUFBZSIsImZpbGUiOiJjb25zb2xlLXJvbGVzLWVkaXQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb25zb2xlLXJvbGUtcGVybWlzc2lvbnMgLnNlY3Rpb24taGVhZGluZ3ttYXJnaW4tYm90dG9tOjJyZW19LmNvbnNvbGUtcm9sZS1wZXJtaXNzaW9ucyAuc3VibWl0LWJ1dHRvbnttYXJnaW4tdG9wOjJyZW19Il19 */","",""]]},6590:(e,n,t)=>{"use strict";t.d(n,{Z:()=>d});var r=t(64062),o=t(97458),a=t(45364),l=t(14517),i=t(52983),s=t(22854);const u="Paper",c=(0,i.forwardRef)(((e,n)=>{const{className:t}=e,i=(0,r.__rest)(e,["className"]),s=(0,l.Z)("oxygen-paper",t);return(0,o.jsx)(a.Z,Object.assign({className:s},i,{ref:n}))}));c.displayName=(0,s.I)(u),c.muiName=u,c.defaultProps={};const d=c}}]);